Ниже — готовый README.md для structgen. Если нужно, подгоню под ваш стиль или добавлю разделы.

---

# structgen — генератор структуры проекта из tree-подобного файла

structgen создает папки и файлы по описанию в текстовом файле формата “как у tree”. Поддерживает Unicode и ASCII-ветки, dry-run, безопасную проверку путей, настраиваемые права и удобные режимы вывода.

- Быстро накинуть каркас проекта из готового дерева
- Безопасно: защита от выхода за пределы корня
- Гибко: права на каталоги/файлы, исполняемые по маскам

## Возможности

- Парсинг tree-подобного формата:
    - Unicode: ├──, └──, │
    - ASCII: |--, `--, +--
    - Игнорирует строку-резюме “N directories, M files”
    - Директория определяется по “/” в конце или по дочерним узлам
- Безопасность:
    - Запрет абсолютных путей, “.”, “..”, слешей внутри имен узлов
    - SafeJoin: гарантирует, что создаваемые пути не выходят за корень
- Режимы:
    - Dry-run (-dry), Verbose (-v), Quiet (-q), Force (-force)
- Права доступа:
    - -dperm (каталоги), -fperm (файлы)
    - -exec-glob для исполняемых файлов (например, *.sh, bin/* → 0755)
    - -db-0600 для *.db/*.sqlite/*.sqlite3

## Требования

- Go 1.22+ (рекомендуется). В go.mod установите:
    - go 1.22

## Установка

Сборка бинарника:
```bash
# из корня репозитория
go build -o structgen ./cmd/structgen
```

С установкой версии:
```bash
go build -ldflags "-X main.version=1.0.0" -o structgen ./cmd/structgen
```

Установка в $GOBIN:
```bash
go install ./cmd/structgen
```

Проверка:
```bash
./structgen -version
./structgen -h
```

## Быстрый старт

1) Подготовьте файл struct с деревом:
```text
project-name/
├── cmd/
│   └── bot/
│       └── main.go
├── internal/
│   ├── bot/
│   │   ├── handlers.go
│   │   └── context.go
│   ├── llm/
│   │   ├── client.go
│   │   ├── parser.go
│   │   └── prompts.go
│   ├── storage/
│   │   ├── interface.go
│   │   ├── sqlite.go
│   │   └── migrations.go
│   ├── scheduler/
│   │   ├── scheduler.go
│   │   └── patterns.go
│   ├── models/
│   │   └── models.go
│   └── config/
│       └── config.go
├── data/
│   └── tasks.db
├── logs/
├── go.mod
├── go.sum
├── config.yaml
├── Makefile
└── README.md
```

2) Сгенерируйте структуру:
```bash
./structgen -in struct -out .
```

Dry-run (ничего не создаст, только покажет операции):
```bash
./structgen -in struct -out . -dry -v
```

## Формат входного файла

- Первая строка — имя корня проекта (один сегмент, можно с “/” на конце).
- Далее — строки с отступами и ветками:
    - Unicode: “│   ” для отступа, “├── ”/“└── ” для веток
    - ASCII: “    ” для отступа, “|-- ”/“`-- ”/“+-- ” для веток
- Директории можно помечать “/” в конце. Если “/” нет, но у узла есть дочерние элементы — он считается директорией.
- Отступ считается группами по 4 пробела. Это соответствует выводу стандартной утилиты tree.

Поддерживаются оба варианта:
```text
├── internal/
└── cmd/
```
и
```text
|-- internal
`-- cmd
```

Итоговую строку tree вида “12 directories, 34 files” можно оставлять — она игнорируется.

## Использование (CLI)

```text
structgen — создаёт проектную структуру из файла с tree-подобным деревом.

Использование:
  structgen -in struct [-out DIR] [-dry] [-force] [-v|-q] [-dperm 0755] [-fperm 0644] [-exec-glob "*.sh,bin/*"] [-db-0600]
```

Флаги:
- -in string
    - Путь к входному файлу со структурой (или "-" для stdin). По умолчанию: struct.
- -out string
    - Каталог, куда создавать проект. По умолчанию: текущий каталог.
- -dry
    - Только показать, что будет создано.
- -force
    - Перезаписывать существующие файлы (truncate).
- -v
    - Подробный вывод.
- -q
    - Тихий режим (минимум сообщений).
- -dperm string
    - Права для каталогов (восьмерично), по умолчанию 0755.
- -fperm string
    - Права для файлов (восьмерично), по умолчанию 0644.
- -exec-glob string
    - Список glob-шаблонов для исполняемых файлов (через запятую), например: "*.sh,bin/*" → 0755.
- -db-0600
    - Ставить 0600 на *.db, *.sqlite, *.sqlite3.
- -version
    - Показать версию и выйти.
- -h, -help
    - Показать справку и выйти.

Примеры:
```bash
# Базовый запуск
structgen -in struct -out .

# Чтение из stdin
cat struct | structgen -in - -out ./dst -v

# Dry-run с подробностями
structgen -in struct -dry -v

# Перезапись существующих файлов (truncate)
structgen -in struct -out . -force

# Исполняемые файлы по маскам и строгие права на базы данных
structgen -in struct -exec-glob "*.sh,bin/*" -db-0600

# Свои права на каталоги/файлы
structgen -in struct -dperm 0750 -fperm 0640
```

Коды выхода:
- 0 — успех
- 1 — ошибка (сообщение в stderr)

## Безопасность и корректность

- Валидация имен:
    - Имя узла — один сегмент без “/” и “\”, не “.” и не “..”, не абсолютный путь.
- SafeJoin:
    - Любой целевой путь проверяется на принадлежность корню (никаких “вылазок” за пределы).
- Конфликты типов:
    - Понятные ошибки, если на пути каталога уже лежит файл, и наоборот.
- Права доступа:
    - Явно выставляются для созданных путей. Дополнительно доступны правила для исполняемых файлов и БД.

Примечания:
- Windows: консоль может странно рисовать Unicode-ветки, но ASCII-формат поддерживается, так что проблем не будет.
- Отступы: считаются кратно четырём пробелам в префиксе строки (как у tree).

## Структура исходников

```text
structgen/
├── cmd/
│   └── structgen/
│       └── main.go         # CLI: флаги, usage, версия
├── internal/
│   ├── app/
│   │   └── app.go          # Склеивает: вход -> парсер -> исполнение
│   ├── fsops/
│   │   └── apply.go        # Создание каталогов/файлов, права, конфликты
│   ├── parser/
│   │   └── parser.go       # Парсер tree-подобного формата (Unicode/ASCII)
│   ├── plan/
│   │   └── plan.go         # Простой план: корень + узлы
│   └── safety/
│       └── safety.go       # ValidateName, SafeJoin и пр.
└── go.mod
```

Архитектурные точки расширения:
- Новые форматы ввода:
    - Можно добавить интерфейс Parser и регистрировать парсеры по -format=tree|yaml|json.
- Шаблоны содержимого:
    - Опция -with-templates и каталог шаблонов (text/template) для автогенерации файлов (README.md, main.go, Makefile).
- Вывод для CI:
    - -json для машинного лога операций (создано, пропущено, конфликт и т.п.).
- Subcommands:
    - structgen init, structgen dry, structgen validate — легко добавить роутер в cmd/structgen.

## Частые вопросы

— Почему у меня ошибка “predeclared any requires go1.18 or later (-lang was set to go1.16)”?  
Проверьте директиву go в go.mod (должно быть go 1.22) и переменную окружения GOFLAGS (убедитесь, что там нет -lang=go1.16). Затем сделайте go mod tidy и пересоберите.

— Обязательно ли ставить “/” у директорий?  
Нет. Если у узла есть дочерние элементы, он будет распознан как каталог и без “/”.

— Что если в дереве пропущены промежуточные уровни?  
Утилита вернёт ошибку “некорректная вложенность” — нельзя переходить глубже, чем на один уровень относительно текущего стека без родительского узла.

## Лицензия

Укажите здесь лицензию проекта (например, MIT).